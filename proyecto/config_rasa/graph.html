<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Rasa Core Visualisation</title>
    <script src="https://dagrejs.github.io/project/dagre-d3/latest/dagre-d3.min.js"></script>
    <script src="https://dagrejs.github.io/project/dagre/latest/dagre.min.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://dagrejs.github.io/project/graphlib-dot/v0.6.3/graphlib-dot.js"></script>
</head>
<body>
<div id="errormsg" style="color: #b00"></div>
<svg>
    <style id="graph-style">
        .node.invisible > rect {
            display: none;
        }

        .node.start > rect {
            fill: #7f7;
            rx: 30;
            ry: 18;
        }

        .node.end > rect {
            fill: #f77;
            rx: 30;
            ry: 18;
        }

        .node:not(.active) > rect, .node:not(.active) > .label {
            opacity: 0.4;
        }

        .edgePath:not(.active) path {
            opacity: 0.4;
        }

        .node.ellipsis > rect {
            fill: #CCC;
        }

        .node.intent > rect {
            fill: #7ff;
        }

        .node.dashed > rect {
            stroke-dasharray: 5;
        }

        text {
            font-weight: 300;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serf, serif;
            font-size: 14px;
            color: #1f1d1d;
        }

        .node rect {
            stroke: #444;
            fill: #fff;
            stroke-width: 1.5px;
        }

        .edgePath path {
            stroke: #333;
            stroke-width: 1.5px;
        }

        svg {
            position: fixed;
            top: 10px;
            left: 0;
            height: 100%;
            width: 100%
        }
    </style>
    <g></g>
</svg>
<script>

  function serveGraph() {
    let oldInputGraphValue;

    const url = 'visualization.dot';
    const refreshInterval = 500;

    // trigger a refresh by fetching an updated graph
    setInterval(function () {
      fetch(url).then(r => r.text()).then(dot => {
        document.getElementById('errormsg').innerHTML = '';
        if (oldInputGraphValue === dot) return;

        oldInputGraphValue = dot;
        drawGraph(dot);
      }).catch(err => {
        document.getElementById('errormsg').innerHTML =
          'Failed to update plot. (' + err.message + ')';
      });
    }, refreshInterval);
  }

  function drawGraph(graph) {
    let g = graphlibDot.read(graph);
    // Set margins, if not present
    if (!g.graph().hasOwnProperty("marginx") &&
      !g.graph().hasOwnProperty("marginy")) {
      g.graph().marginx = 20;
      g.graph().marginy = 20;
    }
    g.graph().transition = function (selection) {
      return selection.transition().duration(300);
    };
    // Render the graph into svg g
    d3.select("svg g").call(render, g);
  }
  // Set up zoom support
  const svg = d3.select("svg"),
    inner = d3.select("svg g"),
    zoom = d3.zoom().on("zoom", function () {
      inner.attr("transform", d3.event.transform);
    });
  svg.call(zoom);

  // Create and configure the renderer
  const render = dagreD3.render();

  let isClient = false;
  isClient = true;

  if (isClient) {
    // Mark all nodes and their edges as active
    cssRules = document.getElementById('graph-style').sheet.cssRules;
    cssRules[3].style.opacity = 1;
    cssRules[4].style.opacity = 1;

    let graph;
    graph = `digraph  {
0 [class="start active", fillcolor=green, fontsize=12, label=START, style=filled];
"-1" [class=end, fillcolor=red, fontsize=12, label=END, style=filled];
1 [class="", fontsize=12, label=utter_saludo];
2 [class="", fontsize=12, label=utter_renuncia_convo];
3 [class="", fontsize=12, label=utter_pregunta_renuncia_conv];
4 [class="", fontsize=12, label=utter_renuncia_convo_extraordinaria];
5 [class="", fontsize=12, label=utter_renuncia_convo_link];
7 [class="", fontsize=12, label=utter_becas];
8 [class="", fontsize=12, label=utter_conocer_requisitos_becas];
9 [class="", fontsize=12, label=utter_adios];
11 [class="", fontsize=12, label=utter_becas_requisitos];
12 [class="", fontsize=12, label=utter_conocer_fechas_becas];
17 [class="", fontsize=12, label=utter_becas_requisitos];
22 [class="", fontsize=12, label=utter_becas];
30 [class="", fontsize=12, label=utter_matric_aviso];
31 [class="", fontsize=12, label=utter_matric_plazos_matriculacion];
32 [class="", fontsize=12, label=utter_matric_pregunta_conocer_documentos_necesarios];
38 [class="", fontsize=12, label=utter_matric_preguntar_si_matriculado];
39 [class="", fontsize=12, label=utter_matric_nuevos_gradomedio_y_gradosuperior];
40 [class="", fontsize=12, label=utter_matric_conocer_instruciones_alumn_nuevos];
41 [class="", fontsize=12, label=utter_matric_conocer_instrucciones];
52 [class="", fontsize=12, label=utter_matric_aviso];
55 [class="", fontsize=12, label=utter_matric_plazos_matriculacion];
70 [class="", fontsize=12, label=utter_matric_preguntar_si_matriculado];
71 [class="", fontsize=12, label=utter_matric_pregunar_grado];
72 [class="", fontsize=12, label=utter_matric_ya_matriculados_gm];
80 [class="", fontsize=12, label=utter_matric_ya_matriculados_gs];
97 [class="", fontsize=12, label=action_show_degrees];
100 [class="", fontsize=12, label=utter_inform_pregunta_que_estudiar];
101 [class="", fontsize=12, label=utter_inform_texto_cursos];
102 [class="", fontsize=12, label=utter_inform_grado_medio_smr];
103 [class="", fontsize=12, label=utter_inform_conocer_modulos];
104 [class="", fontsize=12, label=utter_inform_responder_con_link];
117 [class="", fontsize=12, label=utter_inform_grado_medio_smr_modulos];
129 [class="", fontsize=12, label=utter_inform_texto_cursos];
130 [class="", fontsize=12, label=utter_inform_grado_superior_dam];
131 [class="", fontsize=12, label=utter_inform_grado_superior_daw];
132 [class="", fontsize=12, label=utter_inform_grado_superior_asir];
133 [class="", fontsize=12, label=utter_inform_conocer_modulos_multiple];
151 [class="", fontsize=12, label=utter_inform_conocer_modulos_tonto];
152 [class="", fontsize=12, label=utter_inform_grado_superior_dam_modulos];
153 [class="", fontsize=12, label=utter_inform_grado_superior_dam_video];
179 [class="", fontsize=12, label=utter_inform_grado_superior_daw_modulos];
180 [class="", fontsize=12, label=utter_inform_grado_superior_daw_video];
217 [class="", fontsize=12, label=utter_inform_grado_superior_asir_modulos];
218 [class="", fontsize=12, label=utter_inform_grado_superior_asir_video];
249 [class="", fontsize=12, label=utter_inform_texto_cursos];
250 [class="", fontsize=12, label=utter_inform_grado_master_iabd];
251 [class="", fontsize=12, label=utter_inform_grado_master_ciber];
252 [class="", fontsize=12, label=utter_inform_conocer_modulos_multiple];
261 [class="", fontsize=12, label=utter_inform_conocer_modulos_tonto];
262 [class="", fontsize=12, label=utter_inform_grado_master_iabd_modulos];
263 [class="", fontsize=12, label=utter_inform_grado_master_iabd_video];
297 [class="", fontsize=12, label=utter_inform_grado_master_ciber_modulos];
298 [class="", fontsize=12, label=utter_inform_grado_master_ciber_video];
328 [class="", fontsize=12, label=utter_renuncia_convo_ordinaria];
333 [class="", fontsize=12, label=utter_renuncia_convo_ordinaria_tfg];
335 [class="", fontsize=12, label="..."];
338 [class="", fontsize=12, label=utter_repetir_entrada];
340 [class="", fontsize=12, label=utter_horario_clases];
342 [class="", fontsize=12, label=utter_horario_secretaria];
344 [class="", fontsize=12, label=utter_festivos_vacaciones];
346 [class="", fontsize=12, label=utter_tiempo_espera_certificados];
348 [class="", fontsize=12, label=utter_convalidaciones];
349 [class=intent, fillcolor=lightblue, label="que tal", shape=rect, style=filled];
350 [class=intent, fillcolor=lightblue, label="como eliminar mi registro de una convocatoria", shape=rect, style=filled];
351 [class=intent, fillcolor=lightblue, label="hay alguna fecha limite para renovar la beca", shape=rect, style=filled];
352 [class=intent, fillcolor=lightblue, label="que documentacion necesito aportar para pedir una beca", shape=rect, style=filled];
353 [class=intent, fillcolor=lightblue, label="como se si soy elegible para una beca", shape=rect, style=filled];
354 [class=intent, fillcolor=lightblue, label=fechas, shape=rect, style=filled];
355 [class=intent, fillcolor=lightblue, label="matricula en el centro", shape=rect, style=filled];
356 [class=intent, fillcolor=lightblue, label="matricula en el centro", shape=rect, style=filled];
357 [class=intent, fillcolor=lightblue, label="en que turno se puede estudiar ciberseguridad", shape=rect, style=filled];
358 [class=intent, fillcolor=lightblue, label="que puedo estudiar de informatica en este instituto", shape=rect, style=filled];
359 [class=intent, fillcolor=lightblue, label="como puedo obtener mas detalles sobre los grados medios de informatica", shape=rect, style=filled];
360 [class=intent, fillcolor=lightblue, label="que asignaturas se cursan en los grados superiores de informatica", shape=rect, style=filled];
361 [class=intent, fillcolor=lightblue, label="que salidas laborales tiene el grado superior de DAM", shape=rect, style=filled];
362 [class=intent, fillcolor=lightblue, label="cual es la duracion y los contenidos del grado superior de DAW", shape=rect, style=filled];
363 [class=intent, fillcolor=lightblue, label="que asignaturas se cursan en el grado superior de ASIR", shape=rect, style=filled];
364 [class=intent, fillcolor=lightblue, label="donde puedo obtener informacion sobre los cursos de especializacion", shape=rect, style=filled];
365 [class=intent, fillcolor=lightblue, label="hay algun plazo para solicitar los cursos de especializacion en IABD", shape=rect, style=filled];
366 [class=intent, fillcolor=lightblue, label="qué tematicas se tratan en el curso de especializacion en ciberseguridad", shape=rect, style=filled];
367 [class=intent, fillcolor=lightblue, label="como puedo cancelar mi inscripcion en la convocatoria extraordinaria", shape=rect, style=filled];
368 [class=intent, fillcolor=lightblue, label="hay algun plazo para inscribirse en la convocatoria ordinaria", shape=rect, style=filled];
369 [class=intent, fillcolor=lightblue, label="necesito renunciar a la convocatoria del tfg que debo hacer", shape=rect, style=filled];
370 [class=intent, fillcolor=lightblue, label="realmente no", shape=rect, style=filled];
371 [class=intent, fillcolor=lightblue, label=claro, shape=rect, style=filled];
372 [class=intent, fillcolor=lightblue, label="realmente no", shape=rect, style=filled];
373 [class=intent, fillcolor=lightblue, label=claro, shape=rect, style=filled];
374 [class=intent, fillcolor=lightblue, label="realmente no", shape=rect, style=filled];
375 [class=intent, fillcolor=lightblue, label=si, shape=rect, style=filled];
376 [class=intent, fillcolor=lightblue, label=si, shape=rect, style=filled];
377 [class=intent, fillcolor=lightblue, label=nunca, shape=rect, style=filled];
378 [class=intent, fillcolor=lightblue, label="por supuesto", shape=rect, style=filled];
379 [class=intent, fillcolor=lightblue, label=nunca, shape=rect, style=filled];
380 [class=intent, fillcolor=lightblue, label=correcto, shape=rect, style=filled];
381 [class=intent, fillcolor=lightblue, label="que salidas laborales tienen los grados medios de informatica", shape=rect, style=filled];
382 [class=intent, fillcolor=lightblue, label="cuales son los grados superiores de informatica disponibles", shape=rect, style=filled];
383 [class=intent, fillcolor=lightblue, label="que asignaturas se cursan en los grados medios de informatica", shape=rect, style=filled];
384 [class=intent, fillcolor=lightblue, label="que asignaturas se cursan en los grados superiores de informatica", shape=rect, style=filled];
385 [class=intent, fillcolor=lightblue, label="cuales son los requisitos para acceder a los cursos de especializacion", shape=rect, style=filled];
386 [class=intent, fillcolor=lightblue, label="de ninguna manera", shape=rect, style=filled];
387 [class=intent, fillcolor=lightblue, label="realmente no", shape=rect, style=filled];
388 [class=intent, fillcolor=lightblue, label="no creo", shape=rect, style=filled];
389 [class=intent, fillcolor=lightblue, label=si, shape=rect, style=filled];
390 [class=intent, fillcolor=lightblue, label="cual es la duracion y los contenidos del grado superior de DAM", shape=rect, style=filled];
391 [class=intent, fillcolor=lightblue, label=daw, shape=rect, style=filled];
392 [class=intent, fillcolor=lightblue, label="como puedo matricularme en el grado superior de ASIR", shape=rect, style=filled];
393 [class=intent, fillcolor=lightblue, label="cual es la duracion y los contenidos del grado superior de DAM", shape=rect, style=filled];
394 [class=intent, fillcolor=lightblue, label="que asignaturas se cursan en el grado superior de DAW", shape=rect, style=filled];
395 [class=intent, fillcolor=lightblue, label="hay alguna pagina web donde pueda ver mas sobre el grado superior de ASIR", shape=rect, style=filled];
396 [class=intent, fillcolor=lightblue, label="no me gusta eso", shape=rect, style=filled];
397 [class=intent, fillcolor=lightblue, label="por supuesto", shape=rect, style=filled];
398 [class=intent, fillcolor=lightblue, label="cual es la duración de los cursos de especializacion en IABD", shape=rect, style=filled];
399 [class=intent, fillcolor=lightblue, label="que salidas laborales tiene los curso de especializacion en ciberseguridad", shape=rect, style=filled];
400 [class=intent, fillcolor=lightblue, label="que salidas laborales tienen los cursos de especializacion en IABD", shape=rect, style=filled];
401 [class=intent, fillcolor=lightblue, label="cual es la duracion del curso de especializacion en ciberseguridad", shape=rect, style=filled];
402 [class=intent, fillcolor=lightblue, label="hasta la proxima", shape=rect, style=filled];
403 [class=intent, fillcolor=lightblue, label="/nlu_fallback", shape=rect, style=filled];
404 [class=intent, fillcolor=lightblue, label="Cuando son las clases", shape=rect, style=filled];
405 [class=intent, fillcolor=lightblue, label="Cuando puedo ir a la secretaria", shape=rect, style=filled];
406 [class=intent, fillcolor=lightblue, label="Cuales son los festivos este año", shape=rect, style=filled];
407 [class=intent, fillcolor=lightblue, label="Cuanto tiempo tardan en procesarse las certificaciones", shape=rect, style=filled];
408 [class=intent, fillcolor=lightblue, label="Que debo hacer para convalidar asignaturas", shape=rect, style=filled];
0 -> 335  [class="", key=NONE, label=""];
0 -> 349  [class="", key=0];
1 -> 350  [class="", key=0];
1 -> 351  [class="", key=0];
1 -> 352  [class="", key=0];
1 -> 353  [class="", key=0];
1 -> 354  [class="", key=0];
1 -> 355  [class="", key=0];
1 -> 356  [class="", key=0];
1 -> 357  [class="", key=0];
1 -> 358  [class="", key=0];
1 -> 359  [class="", key=0];
1 -> 360  [class="", key=0];
1 -> 361  [class="", key=0];
1 -> 362  [class="", key=0];
1 -> 363  [class="", key=0];
1 -> 364  [class="", key=0];
1 -> 365  [class="", key=0];
1 -> 366  [class="", key=0];
2 -> 3  [class="", key=NONE, label=""];
3 -> 367  [class="", key=0];
3 -> 368  [class="", key=0];
3 -> 369  [class="", key=0];
4 -> 5  [class="", key=NONE, label=""];
5 -> "-1"  [class="", key=NONE, label=""];
7 -> 8  [class="", key=NONE, label=""];
8 -> 370  [class="", key=0];
8 -> 371  [class="", key=0];
9 -> "-1"  [class="", key=NONE, label=""];
11 -> 12  [class="", key=NONE, label=""];
12 -> 372  [class="", key=0];
12 -> 373  [class="", key=0];
17 -> 9  [class="", key=NONE, label=""];
22 -> 9  [class="", key=NONE, label=""];
30 -> 31  [class="", key=NONE, label=""];
31 -> 32  [class="", key=NONE, label=""];
31 -> 70  [class="", key=NONE, label=""];
32 -> 374  [class="", key=0];
32 -> 375  [class="", key=0];
32 -> 376  [class="", key=0];
38 -> 377  [class="", key=0];
39 -> 40  [class="", key=NONE, label=""];
39 -> 55  [class="", key=NONE, label=""];
40 -> 378  [class="", key=0];
40 -> 379  [class="", key=0];
41 -> 9  [class="", key=NONE, label=""];
52 -> 38  [class="", key=NONE, label=""];
55 -> 40  [class="", key=NONE, label=""];
70 -> 380  [class="", key=0];
71 -> 381  [class="", key=0];
71 -> 382  [class="", key=0];
72 -> 9  [class="", key=NONE, label=""];
80 -> 9  [class="", key=NONE, label=""];
97 -> 9  [class="", key=NONE, label=""];
100 -> 383  [class="", key=0];
100 -> 384  [class="", key=0];
100 -> 385  [class="", key=0];
101 -> 102  [class="", key=NONE, label=""];
102 -> 103  [class="", key=NONE, label=""];
103 -> 386  [class="", key=0];
103 -> 387  [class="", key=0];
104 -> 9  [class="", key=NONE, label=""];
117 -> 104  [class="", key=NONE, label=""];
129 -> 130  [class="", key=NONE, label=""];
130 -> 131  [class="", key=NONE, label=""];
131 -> 132  [class="", key=NONE, label=""];
132 -> 133  [class="", key=NONE, label=""];
133 -> 388  [class="", key=0];
133 -> 389  [class="", key=0];
133 -> 390  [class="", key=0];
133 -> 391  [class="", key=0];
133 -> 392  [class="", key=0];
151 -> 393  [class="", key=0];
151 -> 394  [class="", key=0];
151 -> 395  [class="", key=0];
152 -> 153  [class="", key=NONE, label=""];
153 -> 104  [class="", key=NONE, label=""];
179 -> 180  [class="", key=NONE, label=""];
180 -> 104  [class="", key=NONE, label=""];
217 -> 218  [class="", key=NONE, label=""];
218 -> 104  [class="", key=NONE, label=""];
249 -> 250  [class="", key=NONE, label=""];
250 -> 251  [class="", key=NONE, label=""];
251 -> 252  [class="", key=NONE, label=""];
252 -> 396  [class="", key=0];
252 -> 397  [class="", key=0];
252 -> 398  [class="", key=0];
252 -> 399  [class="", key=0];
261 -> 400  [class="", key=0];
261 -> 401  [class="", key=0];
262 -> 263  [class="", key=NONE, label=""];
263 -> 104  [class="", key=NONE, label=""];
297 -> 298  [class="", key=NONE, label=""];
298 -> 104  [class="", key=NONE, label=""];
328 -> 5  [class="", key=NONE, label=""];
333 -> 5  [class="", key=NONE, label=""];
335 -> 402  [class="", key=0];
335 -> 403  [class="", key=0];
335 -> 404  [class="", key=0];
335 -> 405  [class="", key=0];
335 -> 406  [class="", key=0];
335 -> 407  [class="", key=0];
335 -> 408  [class="", key=0];
338 -> "-1"  [class="", key=NONE, label=""];
340 -> "-1"  [class="", key=NONE, label=""];
342 -> "-1"  [class="", key=NONE, label=""];
344 -> "-1"  [class="", key=NONE, label=""];
346 -> "-1"  [class="", key=NONE, label=""];
348 -> "-1"  [class="", key=NONE, label=""];
349 -> 1  [class="", key=0];
350 -> 2  [class="", key=0];
351 -> 7  [class="", key=0];
352 -> 11  [class="", key=0];
353 -> 11  [class="", key=0];
354 -> 30  [class="", key=0];
355 -> 30  [class="", key=0];
356 -> 52  [class="", key=0];
357 -> 97  [class="", key=0];
358 -> 100  [class="", key=0];
359 -> 101  [class="", key=0];
360 -> 129  [class="", key=0];
361 -> 152  [class="", key=0];
362 -> 179  [class="", key=0];
363 -> 217  [class="", key=0];
364 -> 249  [class="", key=0];
365 -> 262  [class="", key=0];
366 -> 297  [class="", key=0];
367 -> 4  [class="", key=0];
368 -> 328  [class="", key=0];
369 -> 333  [class="", key=0];
370 -> 9  [class="", key=0];
371 -> 17  [class="", key=0];
372 -> 9  [class="", key=0];
373 -> 22  [class="", key=0];
374 -> 9  [class="", key=0];
375 -> 38  [class="", key=0];
376 -> 70  [class="", key=0];
377 -> 39  [class="", key=0];
378 -> 41  [class="", key=0];
379 -> 9  [class="", key=0];
380 -> 71  [class="", key=0];
381 -> 72  [class="", key=0];
382 -> 80  [class="", key=0];
383 -> 101  [class="", key=0];
384 -> 129  [class="", key=0];
385 -> 249  [class="", key=0];
386 -> 104  [class="", key=0];
387 -> 117  [class="", key=0];
388 -> 104  [class="", key=0];
389 -> 151  [class="", key=0];
390 -> 152  [class="", key=0];
391 -> 179  [class="", key=0];
392 -> 217  [class="", key=0];
393 -> 152  [class="", key=0];
394 -> 179  [class="", key=0];
395 -> 217  [class="", key=0];
396 -> 104  [class="", key=0];
397 -> 261  [class="", key=0];
398 -> 262  [class="", key=0];
399 -> 297  [class="", key=0];
400 -> 262  [class="", key=0];
401 -> 297  [class="", key=0];
402 -> 9  [class="", key=0];
403 -> 338  [class="", key=0];
404 -> 340  [class="", key=0];
405 -> 342  [class="", key=0];
406 -> 344  [class="", key=0];
407 -> 346  [class="", key=0];
408 -> 348  [class="", key=0];
}
`;
    drawGraph(graph);
  } else {
    serveGraph();
  }


</script>
</body>
</html>
